(function(e){var a=this;this.wms={RESULT:"result",SUCCESSES:"1",NONE:"0",ERRORS:"-1",MSG:"msg",LOGID:"logId",async:function(i,j,h,f){var g=_ajaxOptions(i,j,h);e.extend(g,{success:function(l,m,k){wms.asyncContextHandler(l);if(this.successHandler){hitch(this,"successHandler")(l,m,k)}else{console.log("no handler defined for success")}},error:function(k,m,l){if(this.errorHandler){hitch(this,"errorHandler")(k,m,l)}else{console.log("no handler defined for error")}}});if(f){g.type=f}e.ajax(g)},asyncGet:function(g,h,f){var i=e.extend({},h,{orgTypeId:orgTypeId});this.async(g,i,f,"GET")},asyncPost:function(g,h,f){var i=e.extend({},h,{orgTypeId:orgTypeId});this.async(g,i,f,"POST")},asyncContextHandler:function(h){var g=(undefined==h.isSuccess?false:h.isSuccess);var j=(undefined==h.logId?"":h.logId);var f=(undefined==h.msg?"":h.msg);var i=c.asyncTip;this.contextHandler(g,j,f,i,true);c.asyncHandler(g)},syncContextHandler:function(){var f=c.syncTip;this.contextHandler(result,logId,msg,f,false);c.syncHandler(result)},contextHandler:function(f,h,j,g,i){c.coreHandler(f,h,j,g,i)}};e(document).ready(function(){wms.syncContextHandler()});var d=wms.app={};var c=wms.app.context={syncTip:true,asyncTip:false,result:result,msg:msg,logId:logId,init:function(f,g,h){if((wms.SUCCESSES==e.trim(f))||("true"==e.trim(f)||true==e.trim(f))){this.result=wms.SUCCESSES}else{if(wms.NONE==e.trim(f)||(""==e.trim(f))){this.result=wms.NONE}else{this.result=wms.ERRORS}}this.logId=g;this.msg=h;this.initWebContext(this.result,this.logId,this.msg)},initWebContext:function(f,g,h){e("body").attr(wms.RESULT,"");e("body").attr(wms.LOGID,"");e("body").attr(wms.MSG,"");e("body").attr(wms.RESULT,f);e("body").attr(wms.LOGID,g);e("body").attr(wms.MSG,h)},validateContextResult:function(){if(wms.ERRORS==e.trim(e("body").attr(wms.RESULT))){wms.frame.notifyError(this.msg)}},showMsg:function(){if(wms.ERRORS==e.trim(e("body").attr(wms.RESULT))){wms.frame.notifyError(this.msg)}else{wms.frame.notifySuccess(this.msg)}},syncHandler:function(f){},asyncHandler:function(f){},coreHandler:function(f,h,j,g,i){this.init(f,h,j);if(i){if(g){this.showMsg()}}else{if(g){this.validateContextResult()}}}};var b=wms.frame={clearNotify:function(){e("#msg").removeAttr("color").html("")},notifyAlert:function(f){f=(undefined==f?"":f);if(""!=f){alert(f)}},notifyError:function(f){f=(undefined==f?"":f);e("#msg").attr("color","red").html(f)},notifyWarning:function(f){f=(undefined==f?"":f);e("#msg").attr("color","orange").html(f)},notifyInfo:function(f){f=(undefined==f?"":f);e("#msg").attr("color","green").html(f)},notifySuccess:function(f){e("#msg").attr("color","green").html(f)}}})(jQuery);var disableFormList=new Array();function enableForm(){for(var a=0;a<disableFormList.length;a++){$(disableFormList[a]).attr("disabled",false)}disableFormList=new Array()}function disableForm(){$(".body-all .input-element").each(function(){if($(this).attr("disabled")==undefined||$(this).attr("disabled")==false){$(this).attr("disabled",true);disableFormList.push(this)}});$(".body-all button").each(function(){if($(this).attr("disabled")==undefined||$(this).attr("disabled")==false){$(this).attr("disabled",true);disableFormList.push(this)}})}function playSound(b){var d=document.getElementById("play-frame-"+b);var a='<embed id="play-sound-'+b+'"  allowFullScreen="true" width="0" height="0" loop="false" autostart="false" quality="high" src="'+staticbase+"/images/"+b+".wav?"+version+'"></embed>';d.innerHTML=a;var c=document.getElementById("play-sound-"+b)}function showDialog(e,c,f,b,a){var d=$(".body-all")[0].offsetLeft;$(".am-modal-title").html(e);$(".am-modal-content").html(c);$("#am-modal-2xntz").css("left",d);$("#am-modal-2xntz").show();$("#am-modal-2xntz [data-am-modal-confirm]").one("click",f);$("#am-modal-2xntz [data-am-modal-cancel]").one("click",b);disableForm()}function hideDialog(){$("#am-modal-2xntz").hide();enableForm()}function showTip(a){var b=$(".body-all")[0].offsetLeft;$(".am-modal-bd").html(a);$("#am-footer-modal").css("left",b);$("#am-footer-modal").show();disableForm()}function hideTip(){$("#am-footer-modal").hide();enableForm()}function pageLocale(a){if(a===undefined){return $("body").attr("locale")||"zh-CN"}else{$("body").attr("locale",a)}}function capitaliseFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}function isString(a){return typeof a==="string"||a instanceof String}function getFunction(a,c){c=c||_self;var d=a.split(".");for(var b=0;b<d.length;b++){c=c(d[b]);if(c==undefined){throw"Function is undefined:"+a}}return c}function integerV(b){var a=parseInt(b,10);return isNaN(a)?null:a}function floatV(b){var a=parseFloat(b);return isNaN(a)?null:a}function hitch(a,b){if(!b){b=a;a=null}if(isString(b)){a=a||_self;if(!a[b]){throw (['hitch: scope["',b,'"] is null (scope="',a,'")'].join(""))}return function(){return a[b].apply(a,arguments||[])}}return !a?b:function(){return b.apply(a,arguments||[])}}function getObject(d,c){c=c||_self;var e=d.split(".");for(var b=0,a;c&&(a=e[b]);b++){c=(a in c?c[a]:undefined)}return c}function setObject(e,d,c){c=c||_self;var g=e.split(".");var f=g.pop();for(var b=0,a;c&&(a=g[b]);b++){c=(a in c?c[a]:c[a]={})}return(c&&f?(c[f]=d):undefined)}function debounce(c,e,b){var d,a;return function(){var h=arguments;var g=function(){d=null;if(!b){a=c(h)}};var f=b&&!d;clearTimeout(d);d=setTimeout(g,e);if(f){a=c(h)}return a}}function tURL(b,a){a=a||"timeflag";var d=(new Date()).getTime(),c=new RegExp(a+"=\\d{13}");if(b.indexOf(a+"=")>=0){b=b.replace(c,a+"="+d.toString());return b}b+=(/\?/.test(b))?"&":"?";return(b+a+"="+d.toString())}function encURL(d,b){var c=d.indexOf("?");if(c===-1){return b?tURL(d,b):d}var a=d.substring(0,c+1),g=d.substring(c+1).split("&");for(var e=0;e<g.length;e++){if(e>0){a+="&"}var f=g[e].split("=");a+=f[0]+"="+encodeURIComponent(f[1])}return b?tURL(a,b):a}function ajaxFormToObj(e){if(!e){return{}}e=isString(e)?$("#"+e).get(0):e;var c={},b="file|submit|image|reset|button|";function a(h,f,g){if(g===null){return}var i=h[f];if(isString(i)){h[f]=[i,g]}else{if($.isArray(i)){h[f].push(g)}else{h[f]=g}}}function d(h){var f=null,g=(h.type||"").toLowerCase();if(h.name&&g&&!h.disabled){if(g==="radio"||g==="checkbox"){if(h.checked){f=h.value}}else{if(h.multiple){f=[];$("option",h).each(function(){if(this.selected){f.push(this.value)}})}else{f=h.value}}}return f}$.each(e.elements,function(g,j){var f=j.name,h=(j.type||"").toLowerCase();if(f&&h&&b.indexOf(h)===-1&&!j.disabled){a(c,f,d(j))}});return c}function _ajaxOptions(c,d,b){var a={};if(arguments.length===1){a=c}else{a=b||{};a.url=c;if(d){if(isString(d)){$.extend(a,{data:ajaxFormToObj(d)})}else{$.extend(a,{data:d})}}}return a}function asyncXhr(b,c,a){return $.ajax(_ajaxOptions(b,c,a))}function asyncXhrGet(b,c,a){return $.ajax($.extend({type:"GET"},_ajaxOptions(b,c,a)))}function asyncXhrPost(b,c,a){return $.ajax($.extend({type:"POST"},_ajaxOptions(b,c,a)))}function syncXhr(c,e,b){var d,a=_ajaxOptions(c,e,b);$.extend(a,{async:false,success:function(f,g){d=f},error:function(g,i,h){d={};var f={};f.message="Error occurs when fetching data from url:"+this.url;f.cause=i?i:h;d.exception=f}});$.ajax(a);return d}function syncXhrGet(b,c,a){if(arguments.length===1){b.type="GET"}else{a=$.extend({},a,{type:"GET"})}return syncXhr(b,c,a)}function syncXhrPost(b,c,a){if(arguments.length===1){b.type="POST"}else{a=$.extend({},a,{type:"POST"})}return this.syncXhr(b,c,a)}function ct(a){if(a==undefined){return new Date().getTime()}return new Date().getTime()-a}function showDialog(e,c,f,b,a){var d=$(".body-all")[0].offsetLeft;$(".am-modal-title").html(e);$(".am-modal-content").html(c);$("#am-modal-2xntz").css("left",d);$("#am-modal-2xntz").show();disableForm()}$(function(){$("#am-modal-2xntz .am-btn-cacnel").click(function(a){hideDialog()});$("#am-modal-2xntz .am-btn-ok").click(function(a){hideDialog()});$(".tip-close").click(function(a){hideTip()})});(function(a){a.fn.extend({serializeObject:function(){var b,g,d,c,f;b=this.serializeArray();g={};d=g.hasOwnProperty;for(c=0;c<b.length;c++){f=b[c];if(!d.call(g,f.name)){g[f.name]=f.value}}return g}})})(jQuery);